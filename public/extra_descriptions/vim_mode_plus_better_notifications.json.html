<link rel="stylesheet" href="../../vendor/css/bootstrap.min.css"/>

<h2 id="karabiner-vim-mode-plus">Karabiner Vim Mode Plus</h2>

<p>A complex modification that mimics <a href="https://vim.fandom.com/wiki/Moving_around" target="_blank">Vim's navigation</a> throughout your entire Mac.</p>

<p>Although I try to keep this mod up-to-date in the KE-complex_modifications repository, you might encounter a more recent version in <a href="https://git.sr.ht/~harmtemolder/karabiner-vim-mode-plus" target="_blank">its own repository</a>.</p>

<h3 id="1-so-what-do-you-get">1. So what do you get?</h3>

<h4 id="11-normal-mode">1.1 NORMAL mode</h4>

<ul>
  <li>Activate with <code>caps lock</code>.</li>
  <li>Deactivate with:
    <ul>
      <li> <code>i</code> or <code>a</code> (there are more like these, see below)</li>
      <li><code>caps lock</code>,</li>
      <li><code>escape</code>,</li>
      <li><code>control</code>+<code>[</code>,</li>
      <li>Clicking any mouse button</li>
      <li>Pressing any key within Atom, iTerm2, PyCharm or VSCodium (because those have their own Vim modes)</li>
      <li>Pressing any key while having at least one finger on your trackpad</li>
    </ul>
  </li>
</ul>

<p>Alternatively you can hold <code>caps lock</code> for NORMAL mode and release it to exit.</p>

<p>Within NORMAL mode you can then move around with:</p>

<table class="table">
  <thead>
    <tr class="header">
      <th>key</th>
      <th>action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>h</code></td>
      <td>Move cursor left*</td>
    </tr>
    <tr>
      <td><code>j</code></td>
      <td>Move cursor down*</td>
    </tr>
    <tr>
      <td>
        <code>k</code>
      </td>
      <td>Move cursor up*</td>
    </tr>
    <tr>
      <td>
        <code>l</code>
      </td>
      <td>Move cursor right*</td>
    </tr>
    <tr>
      <td>
        <code>e</code>
      </td>
      <td>Move cursor to next end of word</td>
    </tr>
    <tr>
      <td>
        <code>b</code>
      </td>
      <td>Move cursor to previous start of word</td>
    </tr>
    <tr>
      <td>
        <code>0</code>
      </td>
      <td>Move cursor to start of line (before any tabs)</td>
    </tr>
    <tr>
      <td>
        <code>^</code>
      </td>
      <td>Move cursor to start of line (after any tabs)</td>
    </tr>
    <tr>
      <td>
        <code>$</code>
      </td>
      <td>Move cursor to end of line</td>
    </tr>
    <tr>
      <td>
        <code>g</code>,<code>g</code>
      </td>
      <td>Move cursor to start of document</td>
    </tr>
    <tr>
      <td>
        <code>G</code>
      </td>
      <td>Move cursor to end of document</td>
    </tr>
    <tr>
      <td>
        <code>{</code>
      </td>
      <td>Move cursor to start of paragraph</td>
    </tr>
    <tr>
      <td>
        <code>}</code>
      </td>
      <td>Move cursor to end of paragraph</td>
    </tr>
  </tbody>
</table>

<p>*These work with <code>shift</code>, <code>control</code>, <code>option</code> and/or <code>command</code>, e.g. for hotkeys within apps.</p>

<p>Combine those with <code>d</code>, <code>y</code> and <code>c</code> to delete (“cut”), yank (“copy”) or change (“cut” and exit NORMAL mode) like so:</p>

<table class="table">
  <thead>
    <tr class="header">
      <th>key</th>
      <th>action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <code>d</code>,<code>d</code>
        /
        <code>y</code>,<code>y</code>
        /
        <code>c</code>,<code>c</code>
      </td>
      <td>Delete/yank/change the entire line</td>
    </tr>
    <tr>
      <td>
        <code>d</code>,<code>e</code>
        /
        <code>y</code>,<code>e</code>
        /
        <code>c</code>,<code>e</code>
      </td>
      <td>Delete/yank/change to the next end of word</td>
    </tr>
    <tr>
      <td>
        <code>d</code>,<code>b</code>
        / ... / ...</td>
      <td>Delete/yank/change to the previous start of word</td>
    </tr>
    <tr>
      <td>...</td>
      <td>Ditto for all other navigation keys mentioned above</td>
    </tr>
  </tbody>
</table>

<p>Also:</p>

<table class="table">
  <thead>
    <tr class="header">
      <th>key</th>
      <th>action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <code>x</code>
      </td>
      <td>Delete forward</td>
    </tr>
    <tr>
      <td>
        <code>X</code>
      </td>
      <td>Delete back</td>
    </tr>
    <tr>
      <td>
        <code>p</code>
        or
        <code>P</code>
      </td>
      <td>Paste at cursor</td>
    </tr>
    <tr>
      <td>
        <code>u</code>
      </td>
      <td>Undo</td>
    </tr>
    <tr>
      <td>
        <code>control</code>+<code>r</code>
      </td>
      <td>Redo</td>
    </tr>
  </tbody>
</table>

<p>To exit NORMAL mode at specific locations:</p>

<table class="table">
  <thead>
    <tr class="header">
      <th>key</th>
      <th>action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <code>i</code>
      </td>
      <td>Exit NORMAL mode at the cursor</td>
    </tr>
    <tr>
      <td>
        <code>I</code>
      </td>
      <td>Exit NORMAL mode at the start of the line</td>
    </tr>
    <tr>
      <td>
        <code>a</code>
      </td>
      <td>Exit NORMAL mode at the cursor</td>
    </tr>
    <tr>
      <td>
        <code>A</code>
      </td>
      <td>Exit NORMAL mode at the end of the line</td>
    </tr>
    <tr>
      <td>
        <code>o</code>
      </td>
      <td>Exit NORMAL mode on a new line below the cursor</td>
    </tr>
    <tr>
      <td>
        <code>O</code>
      </td>
      <td>Exit NORMAL mode on a new line above the cursor</td>
    </tr>
  </tbody>
</table>

<p>I've also mapped 3 keys to <code>F18</code>, <code>F19</code> and <code>F20</code>, which I pick up on within <a href="https://www.hammerspoon.org/">Hammerspoon</a> to load specific modals:</p>

<table class="table">
  <thead>
    <tr class="header">
      <th>key</th>
      <th>action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <code>s</code>
      </td>
      <td>Activate Hammerspoon screen modal</td>
    </tr>
    <tr>
      <td>
        <code>m</code>
      </td>
      <td>Activate Hammerspoon Markdown modal</td>
    </tr>
    <tr>
      <td>
        <code>spacebar</code>
      </td>
      <td>Activate Hammerspoon hyper modal</td>
    </tr>
  </tbody>
</table>

<h4 id="12-visual-mode">1.2 VISUAL mode</h4>

<p>From within NORMAL mode you can switch to VISUAL mode with <code>v</code>. (Unfortunately you cannot switch to the other end of the selection with <code>o</code> as you normally would, so choose your starting point wisely.)</p>

<table class="table">
  <thead>
    <tr class="header">
      <th>key</th>
      <th>action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <code>v</code>
      </td>
      <td>Exit VISUAL mode, enter NORMAL mode</td>
    </tr>
    <tr>
      <td>
        <code>h</code>
      </td>
      <td>Select left</td>
    </tr>
    <tr>
      <td>
        <code>j</code>
      </td>
      <td>Select down</td>
    </tr>
    <tr>
      <td>...</td>
      <td>Ditto for all other navigation keys mentioned above</td>
    </tr>
    <tr>
      <td>
        <code>d</code>
      </td>
      <td>Delete (“cut”) the selection and enter NORMAL mode</td>
    </tr>
    <tr>
      <td>
        <code>y</code>
      </td>
      <td>Yank (“copy”) the selection and enter NORMAL mode</td>
    </tr>
    <tr>
      <td>
        <code>c</code>
      </td>
      <td>Change (“cut”) the selection and exit Vim Mode entirely</td>
    </tr>
    <tr>
      <td>
        <code>x</code>
      </td>
      <td>Remove the selection and enter NORMAL mode</td>
    </tr>
  </tbody>
</table>

<h3 id="2-setting-up">2. Setting up</h3>

<p>Import this complex modification straight into Karabiner through this link: <a href="karabiner://karabiner/assets/complex_modifications/import?url=https://git.sr.ht/~harmtemolder/karabiner-vim-mode-plus/blob/master/vim_mode_plus.json" target="_blank">karabiner://karabiner/assets/complex_modifications/import?url=https://git.sr.ht/~harmtemolder/karabiner-vim-mode-plus/blob/master/vim_mode_plus.json</a> (You might have to copy and paste it into your browser's address bar if your browser does not render it as a clickable link.)</p>

<h3 id="3-making-changes">3. Making changes</h3>

<p>I write my complex modifications in <code>YML</code> files, converting them into <code>JSON</code> using <code>yml-to-json.py</code>. You don't have to, but you can, if you want to. Either way, make sure to remove and re-add all parts of this mod in Karabiner's “Complex modifications” tab after making changes. The order they are in is important.</p>

<h3 id="4-reporting-issues">4. Reporting issues</h3>

<p>If you encounter any issues, please report them <a href="https://todo.sr.ht/~harmtemolder/karabiner-vim-mode-plus" target="_blank">here</a>. (If you need help with sourcehut's issue tracker, see <a href="https://man.sr.ht/todo.sr.ht/" target="_blank">this man page</a>.) I'd also love to hear additions you would like to see to this setup.</p>
